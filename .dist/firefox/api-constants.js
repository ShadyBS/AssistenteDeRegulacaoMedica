export const API_ENDPOINTS={REGULATION_PRIORITIES: "/sigss/configuracaoGravidade/loadConfiguracaoRegra",REGULATION_DETAILS: "/sigss/regulacaoControleSolicitacao/visualiza",REGULATION_CLEAR_LOCK: "/sigss/regulacao/limparLock",SYSTEM_DATETIME: "/sigss/common/dataHora",PARAM_HASH: "/sigss/common/queryStrToParamHash",PATIENT_SEARCH: "/sigss/usuarioServico/busca",PATIENT_DETAILS: "/sigss/usuarioServico/visualiza",CADSUS_SEARCH: "/sigss/usuarioServicoConsultaPDQ/consultarPaciente",PRONTUARIO_HASH: "/sigss/common/queryStrToParamHash",CONSULTATIONS_BASIC: "/sigss/prontuarioAmbulatorial2/buscaDadosConsulta_HTML",CONSULTATIONS_SPECIALIZED: "/sigss/prontuarioAmbulatorial2/buscaDadosConsultaEspecializadas_HTML",EXAMS_REQUESTED: "/sigss/exameRequisitado/findAllReex",EXAM_RESULT: "/sigss/resultadoExame/visualizaImagem",APPOINTMENTS_LIST: "/sigss/resumoCompromisso/lista",APPOINTMENT_DETAILS: "/sigss/agendamentoConsulta/visualiza",EXAM_APPOINTMENT_DETAILS: "/sigss/agendamentoExame/visualizar",REGULATIONS_LIST: "/sigss/regulacaoRegulador/lista",REGULATION_ATTACHMENTS: "/sigss/rear/buscaGrid",REGULATION_ATTACHMENT_URL: "/sigss/rear/getHashArquivo",DOCUMENTS_LIST: "/sigss/isar/buscaGrid",DOCUMENT_URL: "/sigss/isar/getHashArquivo",};export const API_PARAMS={COMMON:{_search: "false",nd:()=> Date.now(),page: "1",},EXAMS:{exameSolicitadoMin: "true",exameSolicitadoOutro: "true",tipoBusca: "reex",sidx: "reex.reexData",sord: "asc",},APPOINTMENTS:{sidx: "data",sord: "desc",},REGULATIONS:{sidx: "regu.reguDataPrevista",sord: "desc",},DOCUMENTS:{sidx: "isar.isarData desc,isar.isarPK.idp",sord: "desc",},REGULATION_ATTACHMENTS:{sidx: "",sord: "asc",},CADSUS:{sidx: "nome",sord: "asc",rows: "50","pdq.cartaoNacionalSus": "","pdq.cpf": "","pdq.rg": "","pdq.nome": "","pdq.dataNascimento": "","pdq.sexo": "","pdq.nomeMae": "",},};export const API_HEADERS={AJAX:{Accept: "application/json,text/javascript,**;q=0.01",},KEEP_ALIVE:{Accept: "application/json,text/javascript,* buildUrl:(baseUrl,endpoint)=>{const cleanBaseUrl=baseUrl.endsWith("/")? baseUrl.slice(0,-1): baseUrl;const fullUrl=`${cleanBaseUrl}${endpoint}`;if(!SECURITY_CONFIG.validateURL(fullUrl)){throw new Error(`URL não autorizada para requisições: ${fullUrl}`);}return fullUrl;},buildRegulationParams:(params)=>{const searchParams=new URLSearchParams();REGULATION_FILTERS.BASE.forEach((filter,index)=>{const key=`filters[${index}]`;if(filter.includes(":")){searchParams.set(key,filter);}else{const value=params[filter] || "";searchParams.set(key,`${filter}:${value}`);}});Object.entries(API_PARAMS.COMMON).forEach(([key,value])=>{searchParams.set(key,typeof value==="function" ? value(): value);});Object.entries(API_PARAMS.REGULATIONS).forEach(([key,value])=>{searchParams.set(key,value);});Object.entries(params).forEach(([key,value])=>{if(!REGULATION_FILTERS.BASE.includes(key)){searchParams.set(key,value);}});return searchParams;},buildCadsusParams:(searchData={})=>{const params=new URLSearchParams();Object.entries(API_PARAMS.CADSUS).forEach(([key,value])=>{params.set(key,value);});Object.entries(API_PARAMS.COMMON).forEach(([key,value])=>{params.set(key,typeof value==="function" ? value(): value);});if(searchData.cpf){const formattedCpf=String(searchData.cpf).replace(/\D/g,"").replace(DATA_FORMATS.CPF.PATTERN,DATA_FORMATS.CPF.FORMAT);params.set("pdq.cpf",formattedCpf);}if(searchData.cns){params.set("pdq.cartaoNacionalSus",searchData.cns);}return params;},buildProntuarioParamString:(params)=>{const allParams={...PRONTUARIO_PARAMS.FIXED,...params};const paramString=Object.entries(allParams).map(([key,value])=> `${key}=${value}`).join("&");return encodeURIComponent(paramString);},};export const SECURITY_CONFIG={ALLOWED_DOMAINS: [ 'gov.br','mv.com.br','cloudmv.com.br','localhost','127.0.0.1' ],validateURL:(url)=>{try{const urlObj=new URL(url);return SECURITY_CONFIG.ALLOWED_DOMAINS.some(domain=> urlObj.hostname===domain || urlObj.hostname.endsWith('.' + domain));}catch{return false;}}};export const API_VALIDATIONS={isValidPatientId:(isenPK)=>{if(!isenPK || typeof isenPK !=="string")return false;const parts=isenPK.split("-");return parts.length===2 && parts[0] && parts[1];},isValidRegulationId:(reguIdp,reguIds)=>{return !!(reguIdp && reguIds);},isJsonResponse:(response)=>{const contentType=response.headers.get("content-type");return contentType && contentType.includes("application/json");},};