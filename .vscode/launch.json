{
  "version": "0.2.0",
  "configurations": [
    // === BROWSER EXTENSION DEBUGGING ===
    {
      "name": "üîµ Debug: Chrome Extension",
      "type": "chrome",
      "request": "launch",
      "url": "chrome://extensions/",
      "webRoot": "${workspaceFolder}",
      "userDataDir": "${workspaceFolder}/.vscode/chrome-debug-profile",
      "runtimeArgs": [
        "--load-extension=${workspaceFolder}/.dist/chrome",
        "--disable-extensions-except=${workspaceFolder}/.dist/chrome",
        "--disable-web-security",
        "--disable-features=TranslateUI",
        "--no-first-run"
      ],
      "preLaunchTask": "üîµ Build: Chrome Only",
      "presentation": {
        "group": "extension",
        "order": 1
      },
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    },
    {
      "name": "ü¶ä Debug: Firefox Extension",
      "type": "firefox",
      "request": "launch",
      "url": "about:debugging#/runtime/this-firefox",
      "webRoot": "${workspaceFolder}",
      "firefoxExecutable": "firefox",
      "profileDir": "${workspaceFolder}/.vscode/firefox-debug-profile",
      "firefoxArgs": [
        "--start-debugger-server=6000"
      ],
      "preLaunchTask": "ü¶ä Build: Firefox Only",
      "presentation": {
        "group": "extension",
        "order": 2
      },
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    },

    // === SPECIFIC SCRIPT DEBUGGING ===
    {
      "name": "üîß Debug: Background Script",
      "type": "chrome",
      "request": "attach",
      "port": 9222,
      "webRoot": "${workspaceFolder}",
      "urlFilter": "chrome-extension://*",
      "presentation": {
        "group": "scripts",
        "order": 1
      }
    },
    {
      "name": "üìÑ Debug: Content Script",
      "type": "chrome",
      "request": "attach",
      "port": 9222,
      "webRoot": "${workspaceFolder}",
      "urlFilter": "*sigss*",
      "presentation": {
        "group": "scripts",
        "order": 2
      }
    },
    {
      "name": "üé® Debug: Popup/Sidebar",
      "type": "chrome",
      "request": "attach",
      "port": 9222,
      "webRoot": "${workspaceFolder}",
      "urlFilter": "chrome-extension://*/sidebar.html",
      "presentation": {
        "group": "scripts",
        "order": 3
      }
    },

    // === NODE.JS SCRIPT DEBUGGING ===
    {
      "name": "üèóÔ∏è Debug: Build Script",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/scripts/build.js",
      "args": ["--verbose"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "presentation": {
        "group": "node-scripts",
        "order": 1
      }
    },
    {
      "name": "üîç Debug: Validation Script",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/scripts/validate.js",
      "args": ["--verbose"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "presentation": {
        "group": "node-scripts",
        "order": 2
      }
    },
    {
      "name": "üî¢ Debug: Version Script",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/scripts/version.js",
      "args": ["patch", "--dry-run", "--verbose"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "presentation": {
        "group": "node-scripts",
        "order": 3
      }
    },
    {
      "name": "üöÄ Debug: Release Script",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/scripts/release.js",
      "args": ["--dry-run", "--verbose"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "env": {
        "DEBUG": "true"
      },
      "presentation": {
        "group": "node-scripts",
        "order": 4
      }
    },
    {
      "name": "üè™ Debug: Store Upload Script",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/scripts/store-upload.js",
      "args": ["--target=chrome", "--dry-run", "--verbose"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "presentation": {
        "group": "node-scripts",
        "order": 5
      }
    },

    // === LEGACY SCRIPT DEBUGGING ===
    {
      "name": "üì¶ Debug: Legacy Build ZIPs",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/build-zips.js",
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "presentation": {
        "group": "legacy",
        "order": 1
      }
    },
    {
      "name": "üöÄ Debug: Legacy Release",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/release.js",
      "args": ["1.0.0"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "env": {
        "DEBUG": "true"
      },
      "presentation": {
        "group": "legacy",
        "order": 2
      }
    },

    // === TESTING AND UTILITIES ===
    {
      "name": "üß™ Debug: Jest Tests",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/node_modules/.bin/jest",
      "args": ["--runInBand", "--no-cache"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "presentation": {
        "group": "testing",
        "order": 1
      }
    },
    {
      "name": "üîß Debug: ESLint",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/node_modules/.bin/eslint",
      "args": [".", "--ext", ".js", "--format", "compact"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "presentation": {
        "group": "testing",
        "order": 2
      }
    },

    // === ATTACH CONFIGURATIONS ===
    {
      "name": "üîó Attach: Chrome DevTools",
      "type": "chrome",
      "request": "attach",
      "port": 9222,
      "webRoot": "${workspaceFolder}",
      "presentation": {
        "group": "attach",
        "order": 1
      }
    },
    {
      "name": "üîó Attach: Node Process",
      "type": "node",
      "request": "attach",
      "port": 9229,
      "skipFiles": [
        "<node_internals>/**"
      ],
      "presentation": {
        "group": "attach",
        "order": 2
      }
    },

    // === COMPOUND CONFIGURATIONS ===
    {
      "name": "üéØ Debug: Full Extension (Chrome)",
      "type": "chrome",
      "request": "launch",
      "url": "https://sigss.saude.gov.br/",
      "webRoot": "${workspaceFolder}",
      "userDataDir": "${workspaceFolder}/.vscode/chrome-debug-profile",
      "runtimeArgs": [
        "--load-extension=${workspaceFolder}/.dist/chrome",
        "--disable-extensions-except=${workspaceFolder}/.dist/chrome",
        "--auto-open-devtools-for-tabs"
      ],
      "preLaunchTask": "üîµ Build: Chrome Only",
      "presentation": {
        "group": "full-debug",
        "order": 1
      },
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    }
  ],

  // Compound configurations para debug simult√¢neo
  "compounds": [
    {
      "name": "üéØ Debug: Extension + Scripts",
      "configurations": [
        "üîµ Debug: Chrome Extension",
        "üîß Debug: Background Script"
      ],
      "presentation": {
        "group": "compound",
        "order": 1
      }
    },
    {
      "name": "üîÑ Debug: Build Pipeline",
      "configurations": [
        "üîç Debug: Validation Script",
        "üèóÔ∏è Debug: Build Script"
      ],
      "presentation": {
        "group": "compound",
        "order": 2
      }
    }
  ]
}
